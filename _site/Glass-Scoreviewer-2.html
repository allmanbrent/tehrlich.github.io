<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Score Viewer 2.0 for Glass</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS/JS-->
        <link href='http://fonts.googleapis.com/css?family=Lato:400,700,300,100' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/css/bootstrap.css">
        <link rel="stylesheet" href="/css/bootstrap-responsive.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/flexslider.css">
        <link rel="stylesheet" href="/css/prettyPhoto.css" />
        <link rel="shortcut icon" href="/favicon.ico">
        <script src="/js/googleanalytics.js"></script>
        <script src="/js/jquery-1.7.1.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/jquery.easing.1.3.js"></script>
        <script src="/js/jquery.custom.js"></script>
        <script src="/js/jquery.quicksand.js"></script>
        <script src="/js/jquery.flexslider.js"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    </head>
    <body>
  <div class="wrapper">
    <div class="masthead">
      <div class="container">
      <!-- button for small devices-->
      <div class="row no-margin"><div class="span12"><div class="hidden-desktop">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"></a></div>
      <div class="brand"> <a href="/">tylerehrlich.com</a></div>
      <!-- navigation -->
      <div class="navbar main-nav"><div class="nav-collapse collapse" >
         <ul class="nav pull-right ">
          <li><a href="/posts">Blog</a></li>
          <li><a href="/cv.pdf">CV (PDF)</a></li>
          <li><a href="/contact">Contact</a></li>
        </ul>
        </div></div></div></div>
        <!-- end navigation -->
      </div>
      <!-- end container -->
    </div>
    <!-- end header-->
    <div class="container clearfix">
	<div class="span12">
		<h3 class="intro">Score Viewer 2.0 for Glass</h3>
		<p class="meta">01 Jun 2014</p>
	</div>
<div class="row">
      <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav">
       	  
       	  	
          	<li class="active"><a href="/Glass-Scoreviewer-2.html"><i class="icon-chevron-right"></i>Score Viewer 2.0 for Glass</a></li>
          	 
          
       	  	
          	<li><a href="/costa-rica-through-glass.html"><i class="icon-chevron-right"></i>Costa Rica Through Glass</a></li>
    		
          
       	  	
          	<li><a href="/sweeney-todd-errata.html"><i class="icon-chevron-right"></i>Sweeney Todd: Errata</a></li>
    		
          
       	  	
          	<li><a href="/scoreviewer.html"><i class="icon-chevron-right"></i>Score Viewer for Glass</a></li>
    		
          
       	  	
          	<li><a href="/photostreaming.html"><i class="icon-chevron-right"></i>Streaming Photos from Glass</a></li>
    		
          
       	  	
          	<li><a href="/gazebo-errata.html"><i class="icon-chevron-right"></i>Gazebo Dances: Errata</a></li>
    		
          
       	  	
          	<li><a href="/Sweeney-Todd-Through-Glass.html"><i class="icon-chevron-right"></i>Sweeney Todd Through Glass</a></li>
    		
          
       	  	
          	<li><a href="/BeatKeeper1.html"><i class="icon-chevron-right"></i>BeatKeeper Version 1.0</a></li>
    		
          
       	  	
          	<li><a href="/spelling-bee-errata.html"><i class="icon-chevron-right"></i>Spelling Bee: Errata</a></li>
    		
          
       	  	
          	<li><a href="/gazebo-plan.html"><i class="icon-chevron-right"></i>Gazebo Dances: Rehearsal Schedule</a></li>
    		
          
        </ul>
      </div>
      <div class="span9">
      <p><img src="img/edward.jpg" alt="Kevin, Cindi, and I all reading music notation from Glass" class="img-polaroid mugshot">
<center><em>Andre, Cindi, and I all reading music notation from Glass.</em></center></p>

<p>Last November, we finished the <a href="https://github.com/tehrlich/scoreviewer">first version</a> of the music score viewing application. Built on the <a href="https://developers.google.com/glass/develop/mirror/index">Mirror API</a>, the app pushed a series of cards (what we had as the score of <em>Armenian Dances</em> by Aram Khachaturian) to Glass. Although functional, the app had a few problems.</p>

<ol>
<li><p>Google App Engine (GAE) would occasionally timeout while sending cards to Glass. I didn&#39;t solve this issue fully, but from what I could tell, since we were sending many calls to Glass, the program would stall waiting for a response and terminate. This was far from ideal, and even at GAE&#39;s highest timeout threshold it would still stall on slow applications. A possible fix for this would be to have a different thread responsible for sending the cards, and a loading screen telling the user to wait. Since I knew we were going to start from scratch on this next version, I never implemented this.</p></li>
<li><p>The original app sent all different cards, versus stacked in one bundle. If the user received an email or text message while the bundle of score pages was being pushed to his or her Glass, that would be inserted in the middle of the score. Awkward. I was able to fix this by bundling the cards in one stack.</p></li>
<li><p>If you received new cards while performing, they would take precedence over your score. Turning off wifi and Bluetooth fixed this, but that&#39;s not truly an ideal solution.</p></li>
<li><p>Controlling the cards was limited to the gestures on the touchpad or through a Bluetooth controller. We used a wireless keyboard to advance pages, but pairing the device was awkward and required a hack to work.</p></li>
</ol>

<p>For these reasons, I immediately started using the <a href="https://developers.google.com/glass/develop/gdk/">Glass Development Kit (GDK)</a> to write the next version of the score viewer. Setting up the programming environment for Glass is pretty straightforward and is discussed in the documentation for the GDK.</p>

<p>At its core, the application is very straightforward. An <a href="http://developer.android.com/reference/android/widget/ImageView.html">ImageView</a> loads up the first page of a score, which is simply a 640x360px image. After a certain event occurs, the next image is loaded. After all are cycled through, the score returns to the first page.</p>

<p>Here is the cool feature: to advance pages, the user blinks twice while looking at the Glass display. To go to a previous page, the user taps the touchpad once. This decision was a conscious one; tapping the touchpad is faster than swiping back and forth. In order to get this functionality to work, I used Takahiro &quot;Poly&quot; Horikawa&#39;s Eye Gesture Library on Github, available <a href="github.com/thorikawa/EyeGestureLib">here</a>.</p>

<p>So, how well does it work? Truthfully, quite well. After getting used to looking through or away from Glass, I&#39;m always successful in having the pages advance when they should. Occasionally a &quot;phantom blink&quot; happens, and the page advances before it should. A quick tap brings it back in place. This could be disastrous in live performance, especially if musicians are reading notation off of the device, versus having a conductor use it as a reminder of meter changes and cues. I&#39;ve found that calibrating the winking sensor can greatly reduce phantom blinks. Also, be sure the &quot;wink for photo&quot; setting is enabled in the settings menu before using the app. </p>

<p>Although a bit messy, the source for the Glass Score Viewer 2.0 is available on Github below. The demo score installed is Khachaturian&#39;s <em>Armenian Dances</em>. I hope to comment some more of the code and upload a revised version soon.</p>

<p><a href="https://github.com/tehrlich/gdkscoreviewer">https://github.com/tehrlich/gdkscoreviewer</a></p>

  </div>
</div>
</div>
    <div class="push"></div> <!-- Used for Sticky Footer -->
    </div>
    <!--page footer -->
  <div class="page-footer footer" id="footer">
  <div class="container"></div>
  </div> 
  </div>
</body>
</html>