<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Score Viewer for Glass &#8211; Tyler Ehrlich</title>
<meta name="description" content="Personal website of Tyler Ehrlich.">
<meta name="keywords" content="">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Score Viewer for Glass">
<meta property="og:description" content="Personal website of Tyler Ehrlich.">
<meta property="og:url" content="http://tylerehrlich.com/scoreviewer/">
<meta property="og:site_name" content="Tyler Ehrlich">





<link rel="canonical" href="http://tylerehrlich.com/scoreviewer/">
<link href="http://tylerehrlich.com/feed.xml" type="application/atom+xml" rel="alternate" title="Tyler Ehrlich Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://tylerehrlich.com/assets/css/main.css"> 
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://tylerehrlich.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://tylerehrlich.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://tylerehrlich.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://tylerehrlich.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://tylerehrlich.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://tylerehrlich.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://tylerehrlich.com/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://tylerehrlich.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://tylerehrlich.com/images/me.jpg" alt="Tyler Ehrlich photo" class="author-photo">
					<h4>Tyler Ehrlich</h4>
					<p>Conductor, educator, programmer.</p>
				</li>
				<li><a href="http://tylerehrlich.com/bio/">Bio</a></li>
				<li><a href="http://tylerehrlich.com/cv.pdf"><i class="fa fa-file-pdf-o"></i>CV</a></li>
				<li><a href="http://tylerehrlich.com/rep.pdf"><i class="fa fa-file-pdf-o"></i>Repertoire</a></li>
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Blog</a>
			<ul class="dl-submenu">
				<li><a href="http://tylerehrlich.com/posts/">Posts by Date</a></li>
				<li><a href="http://tylerehrlich.com/tags/">Posts by Category</a></li>
			</ul>
		</li>
		<li>
			<a href="#">Contact</a>
			<ul class="dl-submenu">
				<li>
					<a href="mailto:tylerlehrlich@gmail.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				
				<li>
					<a href="http://facebook.com/tehrlich"><i class="fa fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="http://github.com/tehrlich"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				<li>
					<a href="http://instagram.com/tlehrlich"><i class="fa fa-instagram"></i> Instagram</a>
				</li>
				
				
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  
  <div class="entry-image">
    <img src="http://tylerehrlich.com/images/salient.png" alt="Score Viewer for Glass">
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://tylerehrlich.com/scoreviewer/" rel="bookmark" title="Score Viewer for Glass">Score Viewer for Glass</a></h1>
        
        <h2>January 04, 2014</h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>After spending weeks looking into Android PDF libraries, the Mirror API seemed like a much more logical choice to use to deploy a musical score. Google supports several programming languages to use with the API: Go, Java, .NET, PHP, Python, and Ruby. Due to curiosity and a fondness for the language, I decided to use Python.</p>

<p>After downloading the quick start project, I created an application on Google App Engine. Since this application was designed to contain <i>Armenian Dances</i> by Aram Khachaturian, the application was titled “CUWindsKach” and is accessible at: [http://cuwindskach.appspot.com]. After editing <code>client_secrets.json</code>, generating a <code>session.secret</code> file to store session cookies, and editing <code>app.yaml</code> to include the name of the application, the Python application was ready to deploy.</p>

<p>Once it was launched, the next step was including the scores. After scanning in the condensed score, I divided it up into 640x360 images, the size of Glass’s display, using Photoshop. A simple form hooked into the Python application to send the image.</p>

<p>Here is the form that serves the image to the backend:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;operation&quot;</span> <span class="na">value=</span><span class="s">&quot;insertItem&quot;</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;imageUrl&quot;</span> <span class="na">value=</span><span class="s">&quot;/static/images/1.jpg&quot;</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;contentType&quot;</span> <span class="na">value=</span><span class="s">&quot;image/jpeg&quot;</span><span class="nt">&gt;</span>

	  <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn btn-block&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>
	    Insert page 1
	    <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">&quot;button-icon&quot;</span> <span class="na">src=</span><span class="s">&quot;/static/images/1.jpg&quot;</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;/button&gt;</span>
	<span class="nt">&lt;/form&gt;</span></code></pre></div>

<p>Here is the backend Python code that processes the HTML form.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">_insert_item</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="sd">&quot;&quot;&quot;Insert a timeline item.&quot;&quot;&quot;</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;Inserting timeline item&#39;</span><span class="p">)</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># this is slightly unnecessary, as the two levels are null and default</span>
    <span class="s">&#39;notification&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="s">&#39;DEFAULT&#39;</span><span class="p">}</span> 
<span class="p">}</span>
<span class="c"># check if it&#39;s just text or if there markup</span>
<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;html&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;on&#39;</span><span class="p">:</span> 
  <span class="n">body</span><span class="p">[</span><span class="s">&#39;html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;message&#39;</span><span class="p">)]</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">body</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;message&#39;</span><span class="p">)</span>

<span class="n">media_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;imageUrl&#39;</span><span class="p">)</span> 
<span class="k">if</span> <span class="n">media_link</span><span class="p">:</span> <span class="c"># see if media is present</span>
  <span class="k">if</span> <span class="n">media_link</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">):</span>
    <span class="n">media_link</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">get_full_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_link</span><span class="p">)</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="n">urlfetch</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">media_link</span><span class="p">,</span> <span class="n">deadline</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
  <span class="n">media</span> <span class="o">=</span> <span class="n">MediaIoBaseUpload</span><span class="p">(</span>
      <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">),</span> <span class="n">mimetype</span><span class="o">=</span><span class="s">&#39;image/jpeg&#39;</span><span class="p">,</span> <span class="n">resumable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">media</span> <span class="o">=</span> <span class="bp">None</span>
<span class="c"># self.mirror_service is initialized in util.auth_required.</span>
<span class="c"># insert into the timeline</span>
<span class="bp">self</span><span class="o">.</span><span class="n">mirror_service</span><span class="o">.</span><span class="n">timeline</span><span class="p">()</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">media_body</span><span class="o">=</span><span class="n">media</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span> 
<span class="k">return</span>  <span class="s">&#39;A timeline item has been inserted.&#39;</span></code></pre></div>

<p>Any user with Glass can navigate to this page and install the score to <i>Armenian Dances</i> on his or her Glass. It is possible to change this, however, using the settings in Google App Engine. One possible improvement for this application would be to bundle the images together. This way, if the user received a notification while they were installing the score, it would not be placed in between the pages in the score. Also, a single send button would be helpful; currently the user needs to click for each page of the score.</p>

<p>One clear limitation of Glass is the screen size. To combat this, Dr. Turner and I discussed the idea of a salient score that contains only the information necessary to conduct a work. As each conductor’s needs are different, each individual would likely need to create his or her own salient score. This would allow the scores to be as minimalistic as possible. Below is one possible salient score of the opening of <i>Gazebo Dances</i>.</p>

<center><img src="/images/salient.png" alt="Salient" style="width: 600px;" /></center>

<p>This score only contains time changes and other landmarks that are necessary to conduct the work. If a salient score is used in rehearsal, a full score is necessary to have nearby for reference.</p>

<p>To control page turns, a Bluetooth controller is optional, but recommended. To set this up, the native Android <code>Settings.apk</code> file must be sideloaded on the device. Dan McLaughlin’s provides the file <a href="https://googledrive.com/host/0B3CzS-bH2NyETHNQZC1TbWh4RTQ/Settings.apk">here</a>. This application can then be started with the following command:</p>

<pre><code>adb shell am start -n com.android.settings/com.android.settings.Settings
</code></pre>

<p>After the control panel displays, it is possible to pair a keyboard or other Bluetooth device. After the pairing process is complete, pages can be navigated with the left and right arrows on the keyboard.</p>

<p>The source code for this project can be found online at <a href="https://github.com/tehrlich/scoreviewer">https://github.com/tehrlich/scoreviewer</a>. The application is also in production and accessible at <a href="http://cuwindskach.appspot.com">http://cuwindskach.appspot.com</a>.</p>

      <footer class="entry-meta">
        <span class="entry-tags"></span>
        <!--<span><a href="http://tylerehrlich.com/scoreviewer/" rel="bookmark" title="Score Viewer for Glass">Score Viewer for Glass</a> was published on <span class="entry-date date published updated"><time datetime="2014-01-04T00:00:00-05:00">January 04, 2014</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="http://tylerehrlich.com/about/" title="About Tyler Ehrlich">Tyler Ehrlich</a></span></span>-->
        
      </footer>
    </div><!-- /.entry-content -->
    
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Tyler Ehrlich. Powered by <a href="http://jekyllrb.com">Jekyll</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://tylerehrlich.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://tylerehrlich.com/assets/js/scripts.min.js"></script>



</body>
</html>
